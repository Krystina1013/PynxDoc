# 前言
由于弹性分片的存在，一个节点所在的分片是会动态变化的，因此需要解决两个问题：
1. 数据库中存储的记录与分片ID有关
2. 请求其他节点传输数据时，需要请求自身分片内的节点

## 后端数据存储
实际上，后端最基本的数据有三种：
1. 区块头，
2. 区块头对应的区块体，
3. 世界状态树

为了实现快速访问，需要在系统中记录一些辅助的数据
### Header-Metadata
   Header是在内存在的一个cache，主要在分叉检测的时候使用：在分叉的时候，需要找到共同的祖先，并且确定哪些区块需要被回滚，哪些区块需要被重放。在Pnyx实现中，分叉需要回滚的区块并不多，但是链同步时，可以使用这个从某个快照块开始进行一小段的数据重放，然后可以快速重建最新的世界状态树。请参考[快速同步]()以了解更多的信息。
### 
   
